<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>회원정보 로드하기(adUser의 백업 파일본들)</title>
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>



</head>
<body>
	<h2>회원정보 보이기, 수정하기, 삭제하기</h2>
	<div id="basic">
		<table border="1" id="AduserId">

			<thead>
				<tr>
					<th>삭제</th>
					<th>유저 아이디</th>
					<th>유저 닉네임</th>
					<!-- <th>유저 닉네임 수정하기</th> -->
					<th>유저 생일</th>
					<th>유저 성별</th>
					<th>유저 or 관리자</th>
					<th>인증 확인</th>
					<th>유저 프로필 사진</th>
					<th>레시피 업로드 개수</th>
					<th>유저 팔로워 수</th>
				</tr>
			</thead>
			<tbody>

				<tr th:each="user : ${UserList}">
					<td><button th:class="delete_btn" th:value='${user.userId}'>삭제하기</button></td>


					<td><input type="text" th:class="C_enter_update_Id"
						th:id="|enter_update_ID${userStat.index}|" name="userId"
						th:value="${user.userId}" readonly></td>
					<td><input type="text"
						th:id="|enter_update_nickName${userStat.index}|"
						th:name="nickName" th:value="${user.nickName}"> <!-- 	 <input type="text"		name="nickName" th:value="${user.nickName}"> -->
						<!-- <input type="submit" th:value="${user.nickName}">Submit --></td>
					<td th:text="${user.birth}">유저 생일</td>
					<td th:text="${user.gender}">유저 성별</td>
					<td th:text="${user.access}">유저 or 관리자 확인</td>
					<td th:text="${user.auth}">인증 확인</td>
					<td th:text="${user.userPic}">유저 프로필 사진</td>
					<td th:text="${user.rcpUploads}">레시피 업로드 개수</td>
					<td th:text="${user.followers}">유저 팔로워 수</td>
				</tr>
			</tbody>
		</table>
	</div>
	<script>
		
	</script>

	<script type="text/javascript">
		$(document).ready(
				function() {
					var ENTER_KEY = 13;
					nickNames = document.getElementsByName('nickName');
					nickNames.forEach(function(nickName, i) {

						nickName.addEventListener('keyup',
								function(event) {
									console.log('enter_update_ID' + i);
									var value = $(this).val();
									var userId = document
											.getElementById('enter_update_ID'
													+ i).value;

									console.log(value + ":" + userId);
									if (event.keyCode === ENTER_KEY) {
										event.preventDefault();
										var nick = value;
										var user_Id = userId;
										event.preventDefault();
										alert(nick.value + "로 변경되었습니다.");
										console.log(user_Id + "유저 되나?");
										console.log(nick + "닉네임 되나?");
										//userID값도 넣어주어야 됩니다.
										$.ajax({
											method : "POST",
											url : './admin/updateUserNickName',
											data : {
												nickName : nick,
												userId : user_Id
											},
										}).done(function(response) {
											$('#basic').load("admin/adUser");
										});

									} else {
										return false;
									}
								});
					});
				});
	</script>

</body>
</html>