<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title id='pageTitle'>마이페이지(정민)</title>
<style type="text/css"></style>
</head>
<body>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="/js/mypage.js?version=20200630"></script> 

	<!-- 사진 및 계정 정보 -->
	
	<div id="mypageMain">
	<div th:class="uploadPicOfUser">
				<button onclick="window.open('/mypage/userPic','myPic','width=300px, height=300px, location=no, status=no, scrollbars=no');">사진변경하기</button>
		</div>     
	<a href="/userModify.html">회원 정보 수정</a>
	
	<div class="myMenu">
	<button onclick="myRecipe()">레시피</button>
	<button onclick="myFrequent()">즐겨찾기</button>
	<button onclick="myActivity()">활동</button>
	<button onclick="myInquiry()">문의 사항</button>
	</div>
	
	<div id="myInquiry">
		<button onclick="myInquiry()">문의 하기</button>
		<button onclick="myInquiryList()">내가 문의한 글</button>
	</div>

	<div th:id="myInquirySub">
	<div th:id="myInquiryListMain">
	<table>
	<tbody>
	<tr th:each="myInqList : ${myInqList}" class="myInq-list">
		<td th:value="${myInqList.qnaDate}" th:text=${myInqList.qnaDate}></td>
		<td th:id="myQnATitle" onclick="showAns();" th:value="${myInqList.qnaTitle}" th:text=${myInqList.qnaTitle}></td>
		<td th:id="myQnACont" th:value="${myInqList.qnaCont}" th:text=${myInqList.qnaCont}></td>
		<td><a class="qnaAns" th:id="${myInqList.qnaCode}" th:data-id="${myInqList.qnaCode}" th:data-answer="${myInqList.answer}" style="cursor: pointer;"></a></td>
		<td th:id="showAns"></td>
	</tr>
	</tbody>
	</table>
	</div>
	</div>
	</div>
	
	<script>
	
	$(document).ready(function(){
		
		   $('.qnaAns').each(function(index){

			      var ans = $(this).data('answer');
			      var ansId = $(this).data('id');
			      console.log(ans)
			      
			      if(ans != null){
			         $('#' + ansId).append("답변완료");
			      }
			      
			      showAns('#' + ansId)
			   })
		
	});
	
	
	function showAns(showTarget){
		   $(showTarget).on('click', function(e){
		      var showItem = $(e.target).closest('.myInq-list').find('#showAns');
		      showItem.text($(e.target).data('answer'))
		   })
		};
	
	
	</script>
	
	
</body>
</html>