<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout='http://www.ultraq.net.nz/thymeleaf/layout'
	layout:decorator='~{layout/default}'>
<head>
<meta charset="UTF-8">
<title id='pageTitle'>Cooking Talking</title>
<th:block layout:fragment='css'>
	<style type="text/css">
.container {
	width: 1000px;
}

body {
	background: white;
}
</style>
</th:block>

<div layout:fragment='content'>
	<div th:text="${follow}"></div>

	<div class='container'>
		<div class="chef_list4_in">
			<div th:class="list_lump" th:each='chef,index:${chefDetail}'>
				<div th:class="list_ranking2">
					<p th:class="list_ranking2_num" th:text='${index.index}+1'></p>
					<p th:class="list_ranking2_num2">
						<span style="color: #fff;" class="glyphicon"></span>
					</p>
				</div>
				<div class="list_mem3">
					<a href="/profile/index.html?uid=20618485" class="mem_pic"><img
						src="http://placehold.it/70x70/"> <!-- ${chef.userVO.userPic} --></a>
				</div>
				<div class="list_cont4">
					<b> <a href="/profile/index.html?uid=20618485"
						th:class="info_name_f" th:text='${chef.userVO.nickName}'> </a>
						<button type="button" class="btn btn-default btn-sm"
							id="btnAddFriend" th:if="${follow == 1}">
							<span class="glyphicon glyphicon-plus" th:text="Follow"></span>
						</button>
						<button type="button" class="btn btn-default btn-sm"
							id="btnRemoveFriend" th:if="${follow == 0}">
							<span class="glyphicon glyphicon-plus" th:text="UnFollow"></span>
						</button>

					</b> <span th:class="mem_cont1" th:text='${chef.userVO.rcpUploads}'></span>
					<span th:class="mem_cont7" th:text='${chef.rcpViews}'></span> <span
						th:class="mem_cont2" th:text='${chef.userVO.followers}'></span>
				</div>
			</div>
		</div>

		<div class="my_tabs">
			<ul class="nav nav-tabs nav-justified" style="position: relative;">
				<li role="presentation" class="active"><a
					href="/profile/recipe.html?uid=jun8707"><i
						class="fas fa-utensils"></i> 레시피</a></li>
				<li role="presentation"><a
					href="/profile/recipe_comment.html?uid=jun8707"><i
						class="fas fa-comments"></i>댓글</a></li>
				<li role="presentation"><a
					href="/profile/talk.html?uid=jun8707"><i
						class="fas fa-user-friends"></i> 스토리</a></li>
			</ul>
		</div>

		<div class="brand_cont mag_t_10">
			<p style="text-align: center; font-size: 13px; padding: 8px 0 5px;"></p>
			<div class="input-group info_srarch" style="margin-top: 10px;">
			</div>

			<ul class="cont_list st3">
				<li><a href="/recipe/6927176" class="thumbnail"
					th:each='recipe:${chefInfo}'> <img
						src="http://placehold.it/198x130/"
						style="width: 200px; height: 130px;"> <!-- ${recipe.rcpTitle} -->
						<div class="caption">
							<h4 th:text='${recipe.rcpTitle}'>스테이크 덮밥 만들기</h4>
							<p class="jq_elips" th:text='by+ 시크제이맘'></p>
						</div>
				</a></li>
				<li th:each="num: ${#numbers.sequence(1,totalPage)}"><a
					th:text="${num}" th:href="'/chefInfo/'+${num}" th:value="${num}"></a>
				</li> 
			</ul>
		</div>
	</div>
	<script>
		$('#btnAddFriend').click(function() {
			
			$.ajax({
				url:'/chef/follow',
				data:{
					follow:$('.glyphicon').text(),
					chefNick:$('.info_name_f').text()		
				},
				type:'GET'
			}).done(function(data){
				if ($('.glyphicon').text() == 'UnFollowUnFollow') {
					$('.glyphicon').text('Follow');
				} else {
					$('.glyphicon').text('UnFollow');
				}
				alert(data); 
			}).fail(function(){
				alert('실패');
			});
		});
		$('#btnRemoveFriend').click(function() {
			
			$.ajax({
				url:'/chef/follow',
				data:{
					follow:$('.glyphicon').text(),
					chefNick:$('.info_name_f').text()		
				},
				type:'GET'
			}).done(function(data){
				if ($('.glyphicon').text() == 'UnFollowUnFollow') {
					$('.glyphicon').text('Follow');
				} else {
					$('.glyphicon').text('UnFollow');
				}
				alert(data); 
			}).fail(function(){
				alert('실패');
			});
		});
	</script>
</div>
</html>